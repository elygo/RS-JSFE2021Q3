(()=>{"use strict";var e={296:(e,t,n)=>{n.r(t)},439:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(n(480)),r=a(n(448)),s=a(n(583)),c=a(n(14));t.default=class{constructor(){this.garage=new o.default,this.winners=new s.default,this.generatehtml=new r.default,this.generatetable=new c.default}template(){return i(this,void 0,void 0,(function*(){const e=document.createElement("header");e.className="header";const t=document.createElement("nav");t.className="nav";const n=document.createElement("button");n.className="link-garage",n.innerText="GARAGE";const i=document.createElement("button");i.className="link-winners",i.innerText="WINNERS",t.append(n,i),e.append(t);const a=document.createElement("main");a.className="main";const o=document.createElement("div");o.className="garage-content";const r=document.createElement("div");r.className="winners-content",a.append(o,r);const s=document.createElement("footer");s.className="footer";const c=document.createElement("a");c.setAttribute("href","https://github.com/elygo"),c.innerText="Github: elygo";const l=document.createElement("span");l.innerText="Developed by Elyor Farmonov";const d=document.createElement("a");d.setAttribute("href","https://rs.school/"),d.innerText="RS-School 2022",s.append(c,l,d),document.body.append(e,a,s)}))}start(){return i(this,void 0,void 0,(function*(){try{yield this.template();const e=document.querySelector(".garage-content"),t=document.querySelector(".winners-content"),n=document.querySelector(".link-garage"),a=document.querySelector(".link-winners");yield this.garage.getCars(this.garage.baseApi),yield this.generatehtml.garageContent(),yield this.generatehtml.showCars(),yield this.generatehtml.removeupdateCars(),yield this.generatehtml.createCarBlock(),yield this.generatehtml.updateCarBlock(),yield this.generatehtml.raceBlock(),yield this.generatehtml.resetBlock(),yield this.generatehtml.showGenerateCars(),yield this.generatehtml.showPages(),yield this.generatehtml.counterBlock(),t.style.display="none",yield this.generatetable.winnersContent(),yield this.winners.getWinners(this.winners.baseApi),yield this.generatetable.showTable(),yield this.generatetable.winnersPages(),yield this.generatetable.winnersCounter(),yield this.generatetable.sortWinners(),n.onclick=()=>i(this,void 0,void 0,(function*(){e.style.display="flex",t.style.display="none"})),a.onclick=()=>i(this,void 0,void 0,(function*(){e.style.display="none",t.style.display="flex"}))}catch(e){console.log(e),document.body.innerText="Please, check the backend server status!",document.body.style.fontSize="30px"}}))}}},480:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.baseApi="http://127.0.0.1:3000/",this.carsPerPage=7}getCar(e,t){return n(this,void 0,void 0,(function*(){try{const n=yield fetch(e+`garage/${t}`);return(yield n.json())||[]}catch(e){console.log(e)}}))}getCars(e,t){return n(this,void 0,void 0,(function*(){try{t||(t="1");const n=yield fetch(e+`garage?_page=${t}&_limit=${this.carsPerPage}`),i=(yield n.json())||[];localStorage.setItem("data",JSON.stringify(i)),localStorage.setItem("totalcars",JSON.stringify(n.headers.get("X-Total-Count")))}catch(e){console.log(e)}}))}createCar(e,t,i){return n(this,void 0,void 0,(function*(){try{yield fetch(e+"garage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,color:i})}),yield this.getCars(this.baseApi)}catch(e){console.log(e)}}))}deleteCar(e,t){return n(this,void 0,void 0,(function*(){try{yield fetch(e+`garage/${t}`,{method:"DELETE"})}catch(e){console.log(e)}}))}updateCar(e,t,i,a){return n(this,void 0,void 0,(function*(){try{yield fetch(e+`garage/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,color:a})})}catch(e){console.log(e)}}))}startCar(e,t,i){return n(this,void 0,void 0,(function*(){try{const n=yield fetch(e+`engine?id=${t}&status=${i}`,{method:"PATCH"}),a=(yield n.json())||[];return a.distance/a.velocity}catch(e){console.log(e)}}))}stopCar(e,t,i){return n(this,void 0,void 0,(function*(){try{yield fetch(e+`engine?id=${t}&status=${i}`,{method:"PATCH"})}catch(e){console.log(e)}}))}driveCar(e,t,i="drive"){return n(this,void 0,void 0,(function*(){try{const n=yield fetch(e+`engine?id=${t}&status=${i}`,{method:"PATCH"});return 500===n.status?(console.log(`The engine of car#${t} is broken`),!1):(yield n.json()).success}catch(e){console.log(e)}}))}}},448:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0;const o=a(n(480)),r=a(n(583)),s=a(n(14));var c;!function(e){e.start="started",e.stop="stopped",e.drive="drive"}(c=t.Status||(t.Status={})),t.default=class{constructor(){this.baseApi="http://127.0.0.1:3000/",this.carsLimitPerPage=7,this.garage=new o.default,this.winners=new r.default,this.generatetable=new s.default}garageContent(){return i(this,void 0,void 0,(function*(){const e=document.createElement("div");e.className="control-panel";const t=document.createElement("div");t.className="control-panel__dynamic";const n=document.createElement("div");n.className="control-panel__counter",e.append(t,n);const i=document.createElement("div");i.className="cars-list",i.id="cars-list";const a=document.createElement("div");a.className="pagination";const o=document.createElement("button");o.id="prev-page",o.innerText="PREV",o.disabled=!0;const r=document.createElement("button");r.id="next-page",r.innerText="NEXT",a.append(o,r),document.querySelector(".garage-content").append(e,i,a)}))}showCars(){return i(this,void 0,void 0,(function*(){const e=(yield JSON.parse(localStorage.getItem("data")))||[],t=document.getElementById("cars-list"),n=document.createElement("div"),i=document.createElement("button"),a=document.createElement("button"),o=document.createElement("button"),r=document.createElement("button"),s=document.createElement("svg"),c=document.createElement("g"),l=document.createElement("path");l.setAttribute("d","m15.84993,14.03183c-3.79257,0 -6.86245,3.41748 -6.86245,7.63949c0,4.22201 3.06988,7.63949 6.86245,7.63949s6.86245,-3.41748 6.86245,-7.63949c0,-4.22201 -3.06988,-7.63949 -6.86245,-7.63949l0,0zm13.02777,-6.10162c0.37734,0.90421 0.67793,1.91521 0.90817,3.01165c0.52444,1.82978 -0.24943,2.21424 -2.04019,1.46667c-1.31749,-0.87573 -2.63497,-1.75858 -3.95246,-2.63431c-0.67153,-0.52686 -0.99131,-1.0466 -0.88259,-1.55922c0.21745,-1.011 1.96984,-1.53787 3.40884,-1.85113c1.82913,-0.40583 1.70122,-0.49126 2.55823,1.56634l0,0l-0.00001,0zm35.29715,10.18836c-1.75878,0 -3.19139,1.5877 -3.19139,3.55275c0,1.95793 1.42621,3.55275 3.19139,3.55275c1.75878,0 3.19139,-1.5877 3.19139,-3.55275c0,-1.96505 -1.42621,-3.55275 -3.19139,-3.55275l0,0zm-48.32492,0c-1.75878,0 -3.19139,1.5877 -3.19139,3.55275c0,1.95793 1.42621,3.55275 3.19139,3.55275c1.75878,0 3.19139,-1.5877 3.19139,-3.55275c0,-1.96505 -1.42621,-3.55275 -3.19139,-3.55275l0,0zm34.07559,-4.84855c-1.77157,-2.11457 -3.81816,-3.48868 -6.18451,-4.81295c-5.18041,-2.90486 -8.35261,-2.54887 -13.8528,-2.54887l1.84832,5.33981c0.77386,1.13916 1.65005,1.94369 2.98034,2.02201l15.20866,0l0,0l-0.00001,0zm14.24933,0.76181c-3.79257,0 -6.86245,3.41748 -6.86245,7.63949c0,4.22201 3.06988,7.63949 6.86245,7.63949s6.86245,-3.41748 6.86245,-7.63949c0,-4.22201 -3.06988,-7.63949 -6.86245,-7.63949l0,0zm-10.84688,-2.32816c-2.25124,-1.55922 -4.70074,-2.9547 -7.41246,-4.14369c-8.25668,-3.62395 -14.5691,-4.27185 -23.22871,-1.35275c-2.60939,1.10356 -5.21878,2.20712 -7.82818,2.89062c-2.57741,0.6835 -13.73768,1.33851 -14.01269,3.4246l2.75649,3.66667c-1.00411,0.96829 -1.82274,2.15728 -2.12333,4.01554c0.08314,1.14628 0.36455,2.10745 0.85061,2.87638c0.82503,1.31715 3.24255,2.67703 4.54725,1.90097c0.41571,-0.24919 0.65235,-0.74757 0.64595,-1.59482c-0.03837,-17.0162 18.41284,-15.07963 17.02501,2.00777l32.19529,0c-5.96067,-17.11587 19.46811,-17.17995 14.95284,-0.59094c1.5861,1.90809 5.32751,-0.96829 7.73864,-7.08415c-0.65874,-0.72621 -1.38144,-1.41683 -2.18729,-2.05761c0.03837,-0.0356 -0.03837,0.13528 0.09593,-0.12104c0.13431,-0.25631 -0.32618,-1.33139 -1.27272,-1.95081c-4.96296,-3.23949 -16.92907,-3.15405 -22.74264,-1.88673l0,0z"),c.append(l),s.append(c);const d=document.createElement("div"),u=document.createElement("div");t.innerHTML="",e.forEach((e=>{o.innerText="Start",o.className="started",o.id=e.id.toString(),r.innerText="Stop",r.disabled=!0,r.className="stopped",r.id=e.id.toString(),n.innerHTML=e.name,n.className="name",i.innerText="Delete",i.className="delete",i.id=e.id.toString(),a.innerText="Select",a.className="select",a.id=e.id.toString(),s.className="car-image",s.id="car-image"+e.id.toString(),s.style.height="30px",s.style.width="80px",l.style.stroke="#000",l.style.width="2px",c.setAttribute("fill",e.color),d.className="race-line",d.append(s),u.className="car-block",u.append(o,r,n,i,a,d),t.innerHTML+=u.outerHTML}))}))}removeupdateCars(){return i(this,void 0,void 0,(function*(){document.getElementById("cars-list").onclick=e=>i(this,void 0,void 0,(function*(){var t,n;const a=e.target,o=yield JSON.parse(localStorage.getItem("data")).length;if("delete"==a.className&&(yield this.garage.deleteCar(this.baseApi,a.id),yield this.winners.deleteWinner(this.baseApi,a.id),yield this.garage.getCars(this.baseApi,null===(t=localStorage.getItem("pagenum"))||void 0===t?void 0:t.toString()),yield this.showCars(),o<this.carsLimitPerPage&&(document.getElementById("next-page").disabled=!0),document.querySelector(".control-panel__counter--cars").innerText=`Garage (${yield JSON.parse(localStorage.getItem("totalcars"))})`,yield this.winners.getWinners(this.baseApi,null===(n=localStorage.getItem("pagewinners"))||void 0===n?void 0:n.toString()),yield this.generatetable.showTable()),"select"==a.className){const e=JSON.parse(localStorage.getItem("data")).filter((e=>e.id.toString()==a.id)),t=document.getElementById("name-updatecar-input");t.value=e[0].name;const n=document.getElementById("color-updatecar-input");n.value=e[0].color;const o=document.getElementById("update-car-button");t.disabled=!1,n.disabled=!1,o.disabled=!1,o.onclick=e=>i(this,void 0,void 0,(function*(){var i;e.preventDefault(),yield this.garage.updateCar(this.baseApi,a.id,t.value,n.value),yield this.garage.getCars(this.baseApi,null===(i=localStorage.getItem("pagenum"))||void 0===i?void 0:i.toString()),yield this.showCars(),yield this.generatetable.showTable(),t.value="",t.disabled=!0,n.disabled=!0,o.disabled=!0}))}const r=document.getElementsByClassName("race-line")[0].offsetWidth-80;if("started"==a.className){a.nextElementSibling.id==a.id&&(a.nextElementSibling.disabled=!1,a.disabled=!0);const e=(yield this.garage.startCar(this.baseApi,a.id,a.className))||5e3;yield this.animateOnStart("car-image"+a.id,e,r),(yield this.garage.driveCar(this.baseApi,a.id))||(yield this.animateOnDrive("car-image"+a.id))}"stopped"==a.className&&(a.previousElementSibling.id==a.id&&(a.previousElementSibling.disabled=!1,a.disabled=!0),yield this.garage.stopCar(this.baseApi,a.id,a.className),yield this.animateOnStop("car-image"+a.id))}))}))}createCarBlock(){return i(this,void 0,void 0,(function*(){const e=document.createElement("input");e.type="text",e.name="name",e.id="name-car-input";const t=document.createElement("input");t.type="color",t.name="color",t.id="color-car-input";const n=document.createElement("button");n.innerText="Create",n.id="create-car-button";const a=document.createElement("div");a.className="control-panel__dynamic--create-car",a.append(e,t,n),document.querySelector(".control-panel__dynamic").appendChild(a),n.onclick=n=>i(this,void 0,void 0,(function*(){var i;n.preventDefault(),yield this.garage.createCar(this.baseApi,e.value,t.value),yield this.garage.getCars(this.baseApi,null===(i=localStorage.getItem("pagenum"))||void 0===i?void 0:i.toString()),yield this.showCars(),e.value="",(yield JSON.parse(localStorage.getItem("data")).length)==this.carsLimitPerPage&&(document.getElementById("next-page").disabled=!1),document.querySelector(".control-panel__counter--cars").innerText=`Garage (${yield JSON.parse(localStorage.getItem("totalcars"))})`}))}))}updateCarBlock(){return i(this,void 0,void 0,(function*(){const e=document.createElement("input");e.type="text",e.name="name",e.id="name-updatecar-input",e.disabled=!0;const t=document.createElement("input");t.type="color",t.value="#ffffff",t.name="color",t.id="color-updatecar-input",t.disabled=!0;const n=document.createElement("button");n.innerText="Update",n.id="update-car-button",n.disabled=!0;const i=document.createElement("div");i.className="control-panel__dynamic--update-car",i.append(e,t,n),document.querySelector(".control-panel__dynamic").appendChild(i)}))}raceBlock(){return i(this,void 0,void 0,(function*(){const e=document.createElement("button");e.innerText="Race",e.id="race-button",document.querySelector(".control-panel__dynamic").appendChild(e),e.onclick=t=>i(this,void 0,void 0,(function*(){t.preventDefault(),e.disabled=!0,document.getElementById("reset-button").disabled=!1;const n=document.getElementsByClassName("race-line")[0].offsetWidth-80,a=(yield JSON.parse(localStorage.getItem("data")))||[];document.querySelectorAll(".started").forEach((e=>e.disabled=!0)),document.querySelectorAll(".stopped").forEach((e=>e.disabled=!1));let o=!0;yield Promise.all(a.map((e=>i(this,void 0,void 0,(function*(){var t;const i=(yield this.garage.startCar(this.baseApi,e.id.toString(),c.start))||5e3;if(yield this.animateOnStart("car-image"+e.id,i,n),yield this.garage.driveCar(this.baseApi,e.id.toString())){if(o){o=!1;const n=document.createElement("div"),a=Number((i/1e3).toFixed(2)),r=1;n.className="winner-title",n.innerText=`${e.name} (${a}s)`,document.body.append(n);const s=yield this.winners.getWinner(this.baseApi,e.id);s?s.time>a?yield this.winners.updateWinner(this.baseApi,e.id,s.wins+1,a):yield this.winners.updateWinner(this.baseApi,e.id,s.wins+1,s.time):yield this.winners.createWinner(this.baseApi,e.id,r,a),yield this.winners.getWinners(this.baseApi,null===(t=localStorage.getItem("pagewinners"))||void 0===t?void 0:t.toString()),yield this.generatetable.showTable(),yield this.generatetable.winnersCounter()}}else yield this.animateOnDrive("car-image"+e.id.toString())}))))),document.getElementById("prev-page").disabled=!1,document.getElementById("next-page").disabled=!1,setTimeout((()=>{document.body.contains(document.querySelector(".winner-title"))&&document.body.removeChild(document.querySelector(".winner-title"))}),5e3)}))}))}resetBlock(){return i(this,void 0,void 0,(function*(){const e=document.createElement("button");e.innerText="Reset",e.id="reset-button",e.disabled=!0,document.querySelector(".control-panel__dynamic").appendChild(e),e.onclick=t=>i(this,void 0,void 0,(function*(){t.preventDefault(),e.disabled=!0,document.getElementById("race-button").disabled=!1,document.body.contains(document.querySelector(".winner-title"))&&document.body.removeChild(document.querySelector(".winner-title"));const n=(yield JSON.parse(localStorage.getItem("data")))||[];document.querySelectorAll(".stopped").forEach((e=>e.disabled=!0)),document.querySelectorAll(".started").forEach((e=>e.disabled=!1)),yield Promise.all(n.map((e=>i(this,void 0,void 0,(function*(){yield this.garage.stopCar(this.baseApi,e.id.toString(),c.stop),yield this.animateOnStop("car-image"+e.id.toString())})))))}))}))}animateOnStart(e,t,n){return i(this,void 0,void 0,(function*(){const i=document.getElementById(e);null==i||i.animate([{transform:"translateX(0px)"},{transform:`translateX(${n}px)`}],{duration:t,iterations:1,fill:"forwards"})}))}animateOnStop(e){return i(this,void 0,void 0,(function*(){const t=document.getElementById(e);null==t||t.getAnimations().map((e=>e.cancel())),null==t||t.animate([{transform:`translateX(${document.getElementsByClassName("race-line")[0].offsetWidth-80}px)`},{transform:"translateX(0px)"}],{fill:"forwards"})}))}animateOnDrive(e){return i(this,void 0,void 0,(function*(){const t=document.getElementById(e);null==t||t.getAnimations().map((e=>e.pause()))}))}showGenerateCars(){return i(this,void 0,void 0,(function*(){const e=document.createElement("button");e.innerText="Generate",e.id="generate-cars-button",document.querySelector(".control-panel__dynamic").appendChild(e),e.onclick=e=>i(this,void 0,void 0,(function*(){var t;e.preventDefault();const n=["Audi","BMW","Chevrolet","Hyundai","Kia","Mercedes-Benz","Porsche","Tesla","Toyota","Volkswagen"],a=["A8","M5","Camaro","Sonata","Carnival","W221","Cayenne","Model Y","Camry","Tiguan"],o=Array.from({length:100},(()=>({name:n[Math.floor(10*Math.random())]+" "+a[Math.floor(10*Math.random())],color:"#"+(16777215*Math.random()<<0).toString(16).padStart(6,"0")})));yield this.loaderStart(),yield Promise.all(o.map((e=>i(this,void 0,void 0,(function*(){yield this.garage.createCar(this.baseApi,e.name,e.color)}))))),yield this.loaderStop(),yield this.garage.getCars(this.baseApi,null===(t=localStorage.getItem("pagenum"))||void 0===t?void 0:t.toString()),yield this.showCars(),(yield JSON.parse(localStorage.getItem("data")).length)==this.carsLimitPerPage&&(document.getElementById("next-page").disabled=!1),document.querySelector(".control-panel__counter--cars").innerText=`Garage (${yield JSON.parse(localStorage.getItem("totalcars"))})`}))}))}loaderStart(){return i(this,void 0,void 0,(function*(){const e=document.createElement("div"),t=document.createElement("div");e.className="lds-ripple",e.append(t,t),document.querySelector(".garage-content").style.filter="blur(10px)",document.body.append(e)}))}loaderStop(){return i(this,void 0,void 0,(function*(){const e=document.querySelector(".lds-ripple");document.querySelector(".garage-content").style.filter="blur(0)",document.body.removeChild(e)}))}showPages(){return i(this,void 0,void 0,(function*(){let e=1;localStorage.setItem("pagenum",e.toString()),document.getElementById("next-page").onclick=()=>i(this,void 0,void 0,(function*(){document.getElementById("prev-page").disabled=!1,e=Number(localStorage.getItem("pagenum")),e++,document.querySelector(".control-panel__counter--page").innerText=`Page (${e})`,localStorage.setItem("pagenum",e.toString()),yield this.garage.getCars(this.baseApi,e.toString()),(yield JSON.parse(localStorage.getItem("data")).length)<this.carsLimitPerPage&&(document.getElementById("next-page").disabled=!0),yield this.showCars()})),document.getElementById("prev-page").onclick=()=>i(this,void 0,void 0,(function*(){e=Number(localStorage.getItem("pagenum")),e--,document.querySelector(".control-panel__counter--page").innerText=`Page (${e})`,localStorage.setItem("pagenum",e.toString()),1==e&&(document.getElementById("prev-page").disabled=!0),yield this.garage.getCars(this.baseApi,e.toString()),(yield JSON.parse(localStorage.getItem("data")).length)==this.carsLimitPerPage&&(document.getElementById("next-page").disabled=!1),yield this.showCars()}))}))}counterBlock(){return i(this,void 0,void 0,(function*(){const e=document.createElement("div");e.className="control-panel__counter--page",e.innerText=`Page (${localStorage.getItem("pagenum")})`;const t=document.createElement("div");t.className="control-panel__counter--cars",t.innerText=`Garage (${yield JSON.parse(localStorage.getItem("totalcars"))})`,document.querySelector(".control-panel__counter").append(t,e)}))}}},14:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(n(480)),r=a(n(583));t.default=class{constructor(){this.baseApi="http://127.0.0.1:3000/",this.winnersLimitPerPage=10,this.winners=new r.default,this.garage=new o.default}winnersContent(){return i(this,void 0,void 0,(function*(){const e=document.createElement("div");e.className="winners-counter";const t=document.createElement("div");t.className="winners-counter__total";const n=document.createElement("div");n.className="winners-counter__page",e.append(t,n);const i=document.createElement("table");i.className="table-container";const a=document.createElement("table");a.id="table";const o=document.createElement("thead");o.id="thead";const r=document.createElement("tr"),s=document.createElement("th"),c=document.createTextNode("Number");s.append(c);const l=document.createElement("th"),d=document.createTextNode("Car");l.append(d);const u=document.createElement("th"),m=document.createTextNode("Name");u.append(m);const g=document.createElement("th");g.id="head-wins",g.className="head-wins";const h=document.createTextNode("Wins");g.append(h);const p=document.createElement("th");p.id="head-besttime",p.className="head-besttime";const y=document.createTextNode("Best time (s)");p.append(y),r.append(s,l,u,g,p),o.append(r);const v=document.createElement("tbody");v.id="tbody",a.append(o,v),i.append(a);const f=document.createElement("div");f.className="winners-pagination";const S=document.createElement("button");S.id="prev-page-w",S.innerText="PREV",S.disabled=!0;const b=document.createElement("button");b.id="next-page-w",b.innerText="NEXT",f.append(S,b),document.querySelector(".winners-content").append(e,i,f)}))}showTable(){return i(this,void 0,void 0,(function*(){const e=yield fetch(this.baseApi+"garage"),t=(yield e.json())||[],n=(yield JSON.parse(localStorage.getItem("winners")))||[],a=document.getElementById("tbody");a.innerText="",n.forEach(((e,n)=>i(this,void 0,void 0,(function*(){const i=document.createElement("tr"),o=document.createElement("td"),r=document.createTextNode((n+1).toString());o.append(r);const s=t.filter((t=>t.id===e.id)),c=document.createElement("td");c.append(yield this.svgImage(s[0].color));const l=document.createElement("td"),d=document.createTextNode(s[0].name);l.append(d);const u=document.createElement("td"),m=document.createTextNode(e.wins.toString());u.append(m);const g=document.createElement("td"),h=document.createTextNode(e.time.toString());g.append(h),i.append(o,c,l,u,g),a.append(i)}))))}))}svgImage(e){return i(this,void 0,void 0,(function*(){const t=document.createElement("div");return t.innerHTML=`<svg class="car-image" id="car-image11" style="height: 30px; width: 80px;"><g fill="${e}"><path d="m15.84993,14.03183c-3.79257,0 -6.86245,3.41748 -6.86245,7.63949c0,4.22201 3.06988,7.63949 6.86245,7.63949s6.86245,-3.41748 6.86245,-7.63949c0,-4.22201 -3.06988,-7.63949 -6.86245,-7.63949l0,0zm13.02777,-6.10162c0.37734,0.90421 0.67793,1.91521 0.90817,3.01165c0.52444,1.82978 -0.24943,2.21424 -2.04019,1.46667c-1.31749,-0.87573 -2.63497,-1.75858 -3.95246,-2.63431c-0.67153,-0.52686 -0.99131,-1.0466 -0.88259,-1.55922c0.21745,-1.011 1.96984,-1.53787 3.40884,-1.85113c1.82913,-0.40583 1.70122,-0.49126 2.55823,1.56634l0,0l-0.00001,0zm35.29715,10.18836c-1.75878,0 -3.19139,1.5877 -3.19139,3.55275c0,1.95793 1.42621,3.55275 3.19139,3.55275c1.75878,0 3.19139,-1.5877 3.19139,-3.55275c0,-1.96505 -1.42621,-3.55275 -3.19139,-3.55275l0,0zm-48.32492,0c-1.75878,0 -3.19139,1.5877 -3.19139,3.55275c0,1.95793 1.42621,3.55275 3.19139,3.55275c1.75878,0 3.19139,-1.5877 3.19139,-3.55275c0,-1.96505 -1.42621,-3.55275 -3.19139,-3.55275l0,0zm34.07559,-4.84855c-1.77157,-2.11457 -3.81816,-3.48868 -6.18451,-4.81295c-5.18041,-2.90486 -8.35261,-2.54887 -13.8528,-2.54887l1.84832,5.33981c0.77386,1.13916 1.65005,1.94369 2.98034,2.02201l15.20866,0l0,0l-0.00001,0zm14.24933,0.76181c-3.79257,0 -6.86245,3.41748 -6.86245,7.63949c0,4.22201 3.06988,7.63949 6.86245,7.63949s6.86245,-3.41748 6.86245,-7.63949c0,-4.22201 -3.06988,-7.63949 -6.86245,-7.63949l0,0zm-10.84688,-2.32816c-2.25124,-1.55922 -4.70074,-2.9547 -7.41246,-4.14369c-8.25668,-3.62395 -14.5691,-4.27185 -23.22871,-1.35275c-2.60939,1.10356 -5.21878,2.20712 -7.82818,2.89062c-2.57741,0.6835 -13.73768,1.33851 -14.01269,3.4246l2.75649,3.66667c-1.00411,0.96829 -1.82274,2.15728 -2.12333,4.01554c0.08314,1.14628 0.36455,2.10745 0.85061,2.87638c0.82503,1.31715 3.24255,2.67703 4.54725,1.90097c0.41571,-0.24919 0.65235,-0.74757 0.64595,-1.59482c-0.03837,-17.0162 18.41284,-15.07963 17.02501,2.00777l32.19529,0c-5.96067,-17.11587 19.46811,-17.17995 14.95284,-0.59094c1.5861,1.90809 5.32751,-0.96829 7.73864,-7.08415c-0.65874,-0.72621 -1.38144,-1.41683 -2.18729,-2.05761c0.03837,-0.0356 -0.03837,0.13528 0.09593,-0.12104c0.13431,-0.25631 -0.32618,-1.33139 -1.27272,-1.95081c-4.96296,-3.23949 -16.92907,-3.15405 -22.74264,-1.88673l0,0z" style="stroke: rgb(0, 0, 0); width: 2px;"></path></g></svg>`,t}))}winnersPages(){return i(this,void 0,void 0,(function*(){let e=1;localStorage.setItem("pagewinners",e.toString()),(yield JSON.parse(localStorage.getItem("winners")).length)==this.winnersLimitPerPage&&(document.getElementById("next-page-w").disabled=!1),document.getElementById("next-page-w").onclick=()=>i(this,void 0,void 0,(function*(){document.getElementById("prev-page-w").disabled=!1,e=Number(localStorage.getItem("pagewinners")),e++,document.querySelector(".winners-counter__page").innerText=`Page (${e})`,localStorage.setItem("pagewinners",e.toString()),yield this.winners.getWinners(this.baseApi,e.toString()),(yield JSON.parse(localStorage.getItem("winners")).length)<this.winnersLimitPerPage&&(document.getElementById("next-page-w").disabled=!0),yield this.showTable()})),document.getElementById("prev-page-w").onclick=()=>i(this,void 0,void 0,(function*(){e=Number(localStorage.getItem("pagewinners")),e--,document.querySelector(".winners-counter__page").innerText=`Page (${e})`,localStorage.setItem("pagewinners",e.toString()),1==e&&(document.getElementById("prev-page-w").disabled=!0),yield this.winners.getWinners(this.baseApi,e.toString()),(yield JSON.parse(localStorage.getItem("winners")).length)==this.winnersLimitPerPage&&(document.getElementById("next-page-w").disabled=!1),yield this.showTable()}))}))}winnersCounter(){return i(this,void 0,void 0,(function*(){document.querySelector(".winners-counter__total").innerText=`Winners (${yield JSON.parse(localStorage.getItem("totalwinners"))})`,document.querySelector(".winners-counter__page").innerText=`Page (${yield JSON.parse(localStorage.getItem("pagewinners"))})`}))}sortWinners(){return i(this,void 0,void 0,(function*(){const e=document.getElementById("head-wins");e.onclick=()=>i(this,void 0,void 0,(function*(){if(!e.classList.contains("asc")&&!e.classList.contains("desc")){e.classList.add("asc");const t=yield localStorage.getItem("pagewinners");return localStorage.setItem("sort","wins"),localStorage.setItem("order","ASC"),yield this.winners.getWinners(this.baseApi,t,"wins","ASC"),void(yield this.showTable())}if(e.classList.contains("asc")){e.classList.remove("asc");const t=yield localStorage.getItem("pagewinners");return localStorage.setItem("sort","wins"),localStorage.setItem("order","DESC"),yield this.winners.getWinners(this.baseApi,t,"wins","DESC"),yield this.showTable(),void e.classList.add("desc")}if(e.classList.contains("desc")){e.classList.remove("desc");const t=yield localStorage.getItem("pagewinners");return localStorage.setItem("sort","null"),localStorage.setItem("order","null"),yield this.winners.getWinners(this.baseApi,t),void(yield this.showTable())}}));const t=document.getElementById("head-besttime");t.onclick=()=>i(this,void 0,void 0,(function*(){if(!t.classList.contains("asc")&&!t.classList.contains("desc")){t.classList.add("asc");const e=yield localStorage.getItem("pagewinners");return localStorage.setItem("sort","time"),localStorage.setItem("order","ASC"),yield this.winners.getWinners(this.baseApi,e,"time","ASC"),void(yield this.showTable())}if(t.classList.contains("asc")){t.classList.remove("asc");const e=yield localStorage.getItem("pagewinners");return localStorage.setItem("sort","time"),localStorage.setItem("order","DESC"),yield this.winners.getWinners(this.baseApi,e,"time","DESC"),yield this.showTable(),void t.classList.add("desc")}if(t.classList.contains("desc")){t.classList.remove("desc");const e=yield localStorage.getItem("pagewinners");return localStorage.setItem("sort","null"),localStorage.setItem("order","null"),yield this.winners.getWinners(this.baseApi,e),void(yield this.showTable())}}))}))}}},583:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.baseApi="http://127.0.0.1:3000/",this.winnersPerPage=10}getWinners(e,t,i,a){return n(this,void 0,void 0,(function*(){try{t||(t="1");const n=i||localStorage.getItem("sort"),o=a||localStorage.getItem("order"),r=yield fetch(e+`winners?_page=${t}&_limit=${this.winnersPerPage}&_sort=${n}&_order=${o}`),s=(yield r.json())||[];localStorage.setItem("winners",JSON.stringify(s)),localStorage.setItem("totalwinners",JSON.stringify(r.headers.get("X-Total-Count")))}catch(e){console.log(e)}}))}getWinner(e,t){return n(this,void 0,void 0,(function*(){try{const n=yield fetch(e+"winners/"+t.toString());return 404===n.status?(console.log(`Car#${t} is not found`),!1):(yield n.json())||[]}catch(e){console.log(e)}}))}createWinner(e,t,i,a){return n(this,void 0,void 0,(function*(){try{yield fetch(e+"winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,wins:i,time:a})})}catch(e){console.log(e)}}))}updateWinner(e,t,i,a){return n(this,void 0,void 0,(function*(){try{yield fetch(e+"winners/"+t.toString(),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({wins:i,time:a})})}catch(e){console.log(e)}}))}deleteWinner(e,t){return n(this,void 0,void 0,(function*(){try{yield fetch(e+`winners/${t}`,{method:"DELETE"})}catch(e){console.log(e)}}))}}},303:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(439));n(296),(new a.default).start()}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(303)})();